<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
  Python çˆ¬å–ã€Šç»æµå­¦äººã€‹æ–‡ç«  Â· Site of Hiropoi
</title>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Hiropoi">
<meta name="description" content="102238867_p0_master1200.jpg">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python çˆ¬å–ã€Šç»æµå­¦äººã€‹æ–‡ç« "/>
<meta name="twitter:description" content="102238867_p0_master1200.jpg"/>

<meta property="og:title" content="Python çˆ¬å–ã€Šç»æµå­¦äººã€‹æ–‡ç« " />
<meta property="og:description" content="102238867_p0_master1200.jpg" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://heropoi.github.io/posts/scrfile/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-12T09:31:25+08:00" />
<meta property="article:modified_time" content="2022-09-12T09:31:25+08:00" />





<link rel="canonical" href="http://heropoi.github.io/posts/scrfile/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.c4d7e93a158eda5a65b3df343745d2092a0a1e2170feeec909b8a89443903c6a.css" integrity="sha256-xNfpOhWO2lpls980N0XSCSoKHiFw/u7JCbiolEOQPGo=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.dd27b6b324cd8326d45b9fb1c81c22358e58a718101a56b3730f2c07ac1f20d8.css" integrity="sha256-3Se2syTNgybUW5&#43;xyBwiNY5YpxgQGlazcw8sB6wfINg=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/icon.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">




<meta name="generator" content="Hugo 0.102.3" />





  </head>






<style>
  .colorscheme-light{
    background-image: url(/images/dayc.jpg);
    background-attachment: fixed;
  }
  .colorscheme-dark{
    background-image: url(/images/nights.jpg);
    background-attachment: fixed;
  }
  .colorscheme-dark>h{
    color: black;
  }
</style>

<body class="preload-transitions colorscheme-auto">
  
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Site of Hiropoi
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">ğŸ“•ä¸ªäººæ–‡ç« </a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">å…³äºæˆ‘</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/friend/">å‹æƒ…é“¾æ¥</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <style>
      h{
        color: black;
      }
      .zoomImage{
        width:100%;
        height:0;
        padding-bottom: 40%;
        overflow:hidden;
        background-position: center center;
        background-repeat: no-repeat;
        -webkit-background-size:cover;
        -moz-background-size:cover;
        border-radius:5px;
        background-size:cover;
    }
  </style>
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://heropoi.github.io/posts/scrfile/">
              Python çˆ¬å–ã€Šç»æµå­¦äººã€‹æ–‡ç« 
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2022-09-12T09:31:25&#43;08:00">
                September 12, 2022
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/markdown/">Markdown</a>
    </span></div>

        </div>
      </header>

      <div style="width:100%;background-color:white;background: rgba(255,255,255,0.5);border-radius:5px">
        
        <div class="zoomImage" style="background-image:url(/images/102238867_p0_master1200.jpg)"></div>
        <div style="padding: 5%;color:black">
          <h3 id="1-äº‹å‰å‡†å¤‡">
  1 äº‹å‰å‡†å¤‡
  <a class="heading-link" href="#1-%e4%ba%8b%e5%89%8d%e5%87%86%e5%a4%87">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<h4 id="11-çˆ¬å–ç½‘å€">
  1.1 çˆ¬å–ç½‘å€
  <a class="heading-link" href="#11-%e7%88%ac%e5%8f%96%e7%bd%91%e5%9d%80">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>â€‹	ã€Šç»æµå­¦äººã€‹å®˜ç½‘ï¼šhttps://www.economist.com/ ï¼ˆéœ€è¦æ¢¯å­ï¼‰</p>
<h4 id="12-æ‰€éœ€ç¯å¢ƒ">
  1.2 æ‰€éœ€ç¯å¢ƒ
  <a class="heading-link" href="#12-%e6%89%80%e9%9c%80%e7%8e%af%e5%a2%83">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<ul>
<li>pythonï¼š3.8</li>
<li>urllib3ï¼š1.25.11ï¼ˆ1.26ä¿®æ”¹äº†ä»£ç†ç­–ç•¥ï¼Œä¸èƒ½æŒ‚æ¢¯å­ï¼Œæ‰€ä»¥ä½¿ç”¨1.25ï¼‰</li>
<li>requestsï¼š2.28.1</li>
</ul>
<p>â€‹	å…¶ä½™äº¤ç»™pipå³å¯</p>
<h3 id="2-å¯è¡Œæ€§åˆ†æ">
  2 å¯è¡Œæ€§åˆ†æ
  <a class="heading-link" href="#2-%e5%8f%af%e8%a1%8c%e6%80%a7%e5%88%86%e6%9e%90">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<h4 id="21-ç½‘é¡µç»“æ„ä¸»é¡µ">
  2.1 ç½‘é¡µç»“æ„ï¼ˆä¸»é¡µï¼‰
  <a class="heading-link" href="#21-%e7%bd%91%e9%a1%b5%e7%bb%93%e6%9e%84%e4%b8%bb%e9%a1%b5">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>â€‹	æ—¢ç„¶è¦çˆ¬å°±å¤šçˆ¬ä¸€ç‚¹ï¼Œæ‰€ä»¥é€‰æ‹©äº†ä»ä¸»é¡µåˆ†ç±»ä¸‹æ‰‹</p>
<p>â€‹	ä¾‹å¦‚businessï¼ˆå•†ä¸šï¼‰åˆ†ç±»æ€»å…±905é¡µï¼ˆæˆªæ­¢è‡³2022/10/27ï¼‰</p>
<p>â€‹	<strong>url ç»“æ„ï¼š[ç±»å‹]?page=[é¡µç ]</strong></p>
<p>â€‹	é¡µé¢æºä»£ç ä¸‹å­˜åœ¨è¿™æ ·çš„ä»¥å¦‚ä¸‹ç»“æ„åŒ…è£¹çš„jsonï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;â€¦â€¦&lt;/script&gt;
</span></span></code></pre></div><p>â€‹	<strong>jsonç»“æ„ï¼š</strong></p>
<p>â€‹	<img src="/images/image-20221027163306251.png" alt=""></p>
<p>â€‹	ç»è¿‡åˆ†è§£å‘ç°ï¼Œè¯¥jsonçš„props-&gt;pageProps-&gt;content-&gt;hasPart-&gt;partsä¸ºæˆ‘ä»¬éœ€è¦çš„æ–‡ç« é“¾æ¥æ•°ç»„</p>
<p>â€‹	ä»¥ä¸‹æ˜¯å…¶ä¸­æ•°æ®çš„ç»“æ„ï¼š</p>
<p><img src="/images/image-20221027164016304.png" alt="image-20221027164016304"></p>
<p>â€‹	æ•°æ®ç»“æ„çš„å…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ–‡ç« æ­£æ–‡é“¾æ¥ ï¼šurl-&gt;canonical</li>
<li>æ–‡ç« æ ‡é¢˜ï¼šheadline</li>
<li>æ–‡ç« æ‰€å±ä¸“æ ï¼šsubheadline</li>
<li>æ–‡ç« æ¦‚æ‹¬ï¼šdescription</li>
<li>åˆŠè¡Œæ—¥æœŸï¼šdatepublished</li>
</ul>
<p>â€‹	è¿˜æœ‰å›¾ç‰‡urlå•¥çš„ï¼Œä¸è¿‡è¿™ä¸ªä¸¢åˆ°æ­£æ–‡é‡Œå°±å¥½</p>
<h4 id="22-ç½‘é¡µç»“æ„æ­£æ–‡">
  2.2 ç½‘é¡µç»“æ„ï¼ˆæ­£æ–‡ï¼‰
  <a class="heading-link" href="#22-%e7%bd%91%e9%a1%b5%e7%bb%93%e6%9e%84%e6%ad%a3%e6%96%87">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>â€‹	è™½ç„¶ç»æµå­¦äººå®˜ç½‘æœ‰ä¼šå‘˜é˜…è¯»é™åˆ¶ï¼Œä½†ç«Ÿç„¶å…ˆåŠ è½½äº†å…¨æ–‡å†é™åˆ¶é˜…è¯»çœŸæ˜¯å¸®å¤§å¿™äº†</p>
<p>â€‹	è€Œä¸”ç«Ÿç„¶å’Œä¹‹å‰ç›¸åŒï¼Œä¹Ÿæ˜¯ç”±å¦‚ä¸‹è¿™ä¸ªç»“æ„åŒ…è£¹çš„</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;â€¦â€¦&lt;/script&gt;
</span></span></code></pre></div><p><img src="/images/image-20221027170858068.png" alt="image-20221027170858068"></p>
<p>â€‹	æ‰€éœ€çš„æ•°æ®ä¼¼æ›¾ç›¸è¯†åœ°é›†ä¸­åœ¨props-&gt;pageProps-&gt;contenté‡Œ</p>
<p>â€‹	ä»ä¸­åˆ†è§£å‡ºçš„å¯ç”¨ä¿¡æ¯å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ–‡ç« æ ¼å¼æ•°ç»„ï¼štext</li>
<li>æ­£æ–‡æ–‡æœ¬å†…å®¹ï¼šbodyText</li>
</ul>
<p>â€‹	å…¶å®è¿™ä¸¤ä¸ªéƒ½èƒ½è·å–æ­£æ–‡ï¼Œä½†ç”¨bodyTextå¥½åƒæ›´ç®€å•æ¬¸ï¼ˆç¬‘ï¼‰</p>
<hr>
<p><strong>P.S.</strong></p>
<p>â€‹	è™½ç„¶æœ¬æ–‡ä¸­ä¸ä¼šç”¨åˆ°ï¼Œä½†å®é™…ä¸Štextçš„åŠŸèƒ½æ€§æ›´å¼ºï¼Œå¯ä»¥å®šä½å›¾ç‰‡ä½ç½®ï¼Œç”šè‡³ç›´æ¥ç”Ÿæˆhtmlæ‹¿æ¥å»ºç«™â€¦â€¦åœ¨æ­¤ä»…è®°å½•æ•°æ®ç»“æ„</p>
<p>â€‹	textä¸ºå¦‚ä¸‹ä¸¤ç§ç»“æ„æ„æˆçš„æ•°ç»„ï¼š</p>
<p>â€‹	<strong>ç»“æ„Aï¼ˆåµŒå¥—å¼æ ‡ç­¾ï¼‰</strong></p>
<ul>
<li>typeï¼šç»“æ„ç±»å‹</li>
<li>nameï¼šæ ‡ç­¾åç§°</li>
<li>childrenï¼šå­ç»“æ„ï¼Œå†…éƒ¨ç”±æ–‡æœ¬å’Œå…¶ä»–çš„åµŒå¥—æ ‡ç­¾ç»„æˆ</li>
</ul>
<p>â€‹	<strong>ç»“æ„Bï¼ˆæ–‡æœ¬ï¼‰</strong></p>
<ul>
<li>typeï¼šç»“æ„ç±»å‹</li>
<li>dataï¼šæ­£æ–‡</li>
</ul>
<hr>
<h3 id="3-ç¨‹åºè®¾è®¡">
  3 ç¨‹åºè®¾è®¡
  <a class="heading-link" href="#3-%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<h4 id="31-downloadhtml-è·å–ç½‘é¡µæºç ">
  3.1 downloadHtml è·å–ç½‘é¡µæºç 
  <a class="heading-link" href="#31-downloadhtml-%e8%8e%b7%e5%8f%96%e7%bd%91%e9%a1%b5%e6%ba%90%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<h5 id="311-æºç ">
  3.1.1 æºç 
  <a class="heading-link" href="#311-%e6%ba%90%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="font-weight:bold">def</span> downloadHtml(url):
</span></span><span style="display:flex;"><span>    cookie = {}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    headers = {
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;User-Agent&#34;</span>: <span style="font-style:italic">&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    res = requests.get(url=url, headers=headers, timeout=40, cookies=cookie)
</span></span><span style="display:flex;"><span>    res.encoding = <span style="font-style:italic">&#34;utf-8&#34;</span>
</span></span><span style="display:flex;"><span>    res.close()
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> res.text
</span></span></code></pre></div><h5 id="312-åŸç†è¯¦è§£">
  3.1.2 åŸç†è¯¦è§£
  <a class="heading-link" href="#312-%e5%8e%9f%e7%90%86%e8%af%a6%e8%a7%a3">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<p>â€‹	ç®€å•åœ°ä½¿ç”¨requestè·å–æºç ï¼Œè¿™ä¸ªä¸å¤ªéœ€è¦è§£é‡Šï¼Œå®é™…ä¸Šè¿™ä¸€éƒ¨åˆ†åº”è¯¥æ”¾åœ¨ä¸€å¼€å§‹å°±å†™å¥½ï¼Œç„¶åçˆ¬ä¸‹æºç å…ˆçœ‹çœ‹ç»“æ„</p>
<p>â€‹	å¦‚æœæ˜¯åŠ¨æ€åŠ è½½è€Œä¸”æ‰¾ä¸åˆ°æ•°æ®æºçš„è¯ï¼Œå°±è¦ç”¨seleniumç­‰åŠ è½½å¥½å†è·å–äº†</p>
<p>â€‹	cookieéœ€è¦æ ¹æ®å®é™…æ‰€éœ€çš„cookieè®¾ç½®ï¼Œè¿™æ¬¡ç”¨ä¸ä¸Š</p>
<p>â€‹	headeræ˜¯è¯·æ±‚å¤´ï¼Œå…·ä½“è®¾å®šçœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://blog.csdn.net/xmxt668/article/details/89461183"> HTTPè¯·æ±‚å¤´æ ¼å¼å’Œå“åº”æ ¼å¼</a></p>
<p>â€‹	è§£ç æ ¼å¼å¯ä»¥å…ˆè¯•è¯•GBKä¹‹ç±»ï¼Œå¦‚æœæŠ¥é”™æˆ–è€…å‡ºç°ä¹±ç çš„è¯å†æ¢åˆ«çš„ï¼Œè¿™é‡Œä½¿ç”¨çš„utf-8ï¼ˆå…¶å®å¤§å¤šæ•°utf-8éƒ½è¡Œï¼‰</p>
<h4 id="32-analysis-ç½‘é¡µæºç è§£æ">
  3.2 analysis ç½‘é¡µæºç è§£æ
  <a class="heading-link" href="#32-analysis-%e7%bd%91%e9%a1%b5%e6%ba%90%e7%a0%81%e8%a7%a3%e6%9e%90">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<h5 id="321-æºç ">
  3.2.1 æºç 
  <a class="heading-link" href="#321-%e6%ba%90%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="font-weight:bold">def</span> analysis(html):
</span></span><span style="display:flex;"><span>    text_pattern = re.compile(<span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;.*?&lt;/script&gt;&#39;</span>)
</span></span><span style="display:flex;"><span>    tag_box = text_pattern.findall(html)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> tag_box
</span></span></code></pre></div><h5 id="322-åŸç†è¯¦è§£">
  3.2.2 åŸç†è¯¦è§£
  <a class="heading-link" href="#322-%e5%8e%9f%e7%90%86%e8%af%a6%e8%a7%a3">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<p>â€‹	é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åˆ†è§£htmlæºç ï¼Œå¦‚ <strong>2.1</strong>ã€<strong>2.2</strong> æ‰€è¯´ï¼Œä¸è®ºæ­£æ–‡å’Œç´¢å¼•ï¼Œå®é™…æ•°æ®éƒ½æ˜¯ä»è¿™ä¸ªscriptæ ‡ç­¾å‡ºæ¥çš„</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>&lt;<span style="font-weight:bold">script</span> id=<span style="font-style:italic">&#34;__NEXT_DATA__&#34;</span> type=<span style="font-style:italic">&#34;application/json&#34;</span>&gt;<span style="">â€¦â€¦</span>&lt;/<span style="font-weight:bold">script</span>&gt;
</span></span></code></pre></div><p>â€‹	å¦‚ä¸Šçš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ<strong>.*?</strong> è¿™ä¸ªéƒ¨åˆ†ä¸­ï¼Œ<strong>.</strong>* æŒ‡çš„æ˜¯æ— è®ºå†…éƒ¨æœ‰å¤šå°‘å­—ç¬¦éƒ½å…¨éƒ¨æ¥æ”¶ï¼Œ<strong>?</strong> åˆ™æ˜¯æŒ‡å°½å¯èƒ½çŸ­åœ°è¿›è¡ŒåŒ¹é…</p>
<p>â€‹	å¦‚æœä¸åŠ ï¼Ÿçš„è¯ï¼Œç”±äºé¡µé¢è¿˜æœ‰å…¶ä»–çš„**<!-- raw HTML omitted -->**æ ‡ç­¾ï¼Œä¼šå› ä¸ºé»˜è®¤åŒ¹é…æœ€é•¿ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æ‹‰åˆ°æœ€åä¸€ä¸ªç»“æŸæ ‡ç­¾ä¸Š</p>
<h4 id="33-main-ä¸»æµç¨‹">
  3.3 main ä¸»æµç¨‹
  <a class="heading-link" href="#33-main-%e4%b8%bb%e6%b5%81%e7%a8%8b">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<h5 id="331-æºç ">
  3.3.1 æºç 
  <a class="heading-link" href="#331-%e6%ba%90%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="font-weight:bold">def</span> main():
</span></span><span style="display:flex;"><span>    requests.session().keep_alive = <span style="font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    url_basic=<span style="font-style:italic">&#34;https://www.economist.com/business&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="font-style:italic"># ç›®å½•è·å–</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">for</span> x <span style="font-weight:bold">in</span> range(1,906):
</span></span><span style="display:flex;"><span>        print(x)
</span></span><span style="display:flex;"><span>        article_urls = []
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">while</span> 1:
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                tag_box=analysis(downloadHtml(url_basic+<span style="font-style:italic">&#39;?page=&#39;</span>+str(x)))
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                time.sleep(3)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">for</span> tag_type <span style="font-weight:bold">in</span> tag_box:
</span></span><span style="display:flex;"><span>            tag_type=tag_type.replace(
</span></span><span style="display:flex;"><span>                <span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;&#39;</span>,<span style="font-style:italic">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>            ).replace(<span style="font-style:italic">&#39;&lt;/script&gt;&#39;</span>,<span style="font-style:italic">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>            print(tag_type)
</span></span><span style="display:flex;"><span>            tag_json=json.loads(tag_type)
</span></span><span style="display:flex;"><span>            urls=tag_json[<span style="font-style:italic">&#39;props&#39;</span>][<span style="font-style:italic">&#39;pageProps&#39;</span>][<span style="font-style:italic">&#39;content&#39;</span>][0][<span style="font-style:italic">&#39;hasPart&#39;</span>][<span style="font-style:italic">&#39;parts&#39;</span>]
</span></span><span style="display:flex;"><span>            <span style="font-style:italic"># print(urls)</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">for</span> i <span style="font-weight:bold">in</span> urls:
</span></span><span style="display:flex;"><span>                url=i[<span style="font-style:italic">&#39;url&#39;</span>][<span style="font-style:italic">&#39;canonical&#39;</span>]
</span></span><span style="display:flex;"><span>                print(url)
</span></span><span style="display:flex;"><span>                article_urls.append(url)
</span></span><span style="display:flex;"><span>		<span style="font-style:italic"># æ­£æ–‡è·å–</span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">for</span> url_c <span style="font-weight:bold">in</span> article_urls:
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">while</span> 1:
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                    tag_box = analysis(downloadHtml(url_c))
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                    time.sleep(5)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">for</span> tag_type <span style="font-weight:bold">in</span> tag_box:
</span></span><span style="display:flex;"><span>                tag_type = tag_type.replace(
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;&#39;</span>, <span style="font-style:italic">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>                ).replace(
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic">&#39;&lt;/script&gt;&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>                tag_json = json.loads(tag_type)
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                    urls = tag_json[<span style="font-style:italic">&#39;props&#39;</span>][<span style="font-style:italic">&#39;pageProps&#39;</span>][<span style="font-style:italic">&#39;content&#39;</span>][0]
</span></span><span style="display:flex;"><span>                    headline = urls[<span style="font-style:italic">&#39;headline&#39;</span>]
</span></span><span style="display:flex;"><span>                    description = urls[<span style="font-style:italic">&#39;description&#39;</span>]
</span></span><span style="display:flex;"><span>                    datePublished = urls[<span style="font-style:italic">&#39;datePublished&#39;</span>]
</span></span><span style="display:flex;"><span>                    bodyText = urls[<span style="font-style:italic">&#39;bodyText&#39;</span>]
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic"># æ–‡ä»¶ç”Ÿæˆ</span>
</span></span><span style="display:flex;"><span>                    file = open(<span style="font-style:italic">&#39;Economy/&#39;</span> 
</span></span><span style="display:flex;"><span>                                + url_c.replace(url_basic + <span style="font-style:italic">&#39;/&#39;</span>, <span style="font-style:italic">&#39;&#39;</span>).replace(<span style="font-style:italic">&#39;/&#39;</span>, <span style="font-style:italic">&#39;.&#39;</span>) + <span style="font-style:italic">&#39;.md&#39;</span>, <span style="font-style:italic">&#39;w&#39;</span>,
</span></span><span style="display:flex;"><span>                                encoding=<span style="font-style:italic">&#39;utf-8&#39;</span>)
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;##&#39;</span> + headline + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;######&#39;</span> + description + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;######&#39;</span> + datePublished + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(bodyText + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.close
</span></span><span style="display:flex;"><span>                    print(headline)
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                    print(<span style="font-style:italic">&#39;Did not fit,abandon&#39;</span>)
</span></span></code></pre></div><h5 id="332-åŸç†è¯¦è§£">
  3.3.2 åŸç†è¯¦è§£
  <a class="heading-link" href="#332-%e5%8e%9f%e7%90%86%e8%af%a6%e8%a7%a3">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h5>
<p>â€‹	é¦–å…ˆéœ€è¦å°†sessionè®¾ç½®ä¸ºä¸ä¿ç•™ï¼Œé˜²æ­¢è¢«æœåŠ¡å™¨å¢™æ‰</p>
<p>â€‹	<code>requests.session().keep_alive = False</code></p>
<p>â€‹	æ¥ä¸‹æ¥çš„ä¸»æµç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸º3éƒ¨åˆ†ï¼š<strong>ç›®å½•è·å–ã€æ­£æ–‡è·å–ã€ç”Ÿæˆæ–‡ä»¶</strong></p>
<h6 id="3321-ç›®å½•è·å–">
  3.3.2.1 ç›®å½•è·å–
  <a class="heading-link" href="#3321-%e7%9b%ae%e5%bd%95%e8%8e%b7%e5%8f%96">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>â€‹	é¦–å…ˆéœ€è¦è·å–åˆ°é¡µé¢æºç ï¼š</p>
<p>â€‹	<code>tag_box=analysis(downloadHtml(url_basic+'?page='+str(x)))</code></p>
<p>â€‹	url_basicä¿å­˜çš„æ˜¯å½“å‰åˆ†ç±»çš„é“¾æ¥ï¼Œæƒ³çˆ¬åˆ«çš„ç±»åˆ«åªéœ€è¦æ›¿æ¢æ‰ä¸»ç½‘å€åçš„é“¾æ¥å³å¯</p>
<p>â€‹	æ¥ä¸‹æ¥é€šè¿‡ <code>replace</code> å°†htmlæ ‡ç­¾éƒ¨åˆ†æ‹†æ‰è®©å®ƒå˜æˆjsonï¼Œç”¨<code>json.loads</code>å°†å…¶å˜æˆpythonè¯å…¸</p>
<p>â€‹	å†æ ¹æ®ä¹‹å‰çš„jsonç»“æ„è·å–åˆ°é“¾æ¥å¹¶ä¿ç•™åˆ°<code>article_urls</code>ä¸­å¤‡ç”¨</p>
<hr>
<p><strong>P.S.</strong></p>
<p>â€‹	å…¶å®åœ¨è¿™é‡Œä¹Ÿèƒ½è·å–åˆ°æ ‡é¢˜ã€æè¿°ã€ä¸“æ åä»¥åŠå‘è¡Œæ—¶é—´ï¼Œå¦‚æœå¯¹æ­£æ–‡æ²¡éœ€æ±‚åªè¦é“¾æ¥åˆ°è¿™ä¸€æ­¥å°±OK</p>
<hr>
<p>â€‹	å®é™…ä¸Šçš„æµç¨‹éå¸¸ç®€å•ï¼Œä½†ç¬¬ä¸€ç‰ˆçš„ä»£ç å¹¶ä¸æ˜¯å¾ˆå¥½ç”¨ï¼Œç»å¸¸ä¼šè¢«æœåŠ¡å™¨å¼ºè¡Œå…³é—­è¿œç¨‹è¿æ¥</p>
<p>â€‹	ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€å¼€å§‹åŠ å…¥äº†tryï¼Œä¸€æ—¦å‡ºé”™å°±é‡è¯•ï¼Œä½†æ˜¯æœ‰æ—¶å€™åªé‡è¯•ä¸€æ¬¡ä¹Ÿä¸å¤Ÿï¼Œ</p>
<p>â€‹	æ‰€ä»¥åŠ å…¥äº†whileï¼Œç›´åˆ°æ²¡æœ‰é—®é¢˜å†è·³å‡ºå¾ªç¯ï¼Œä»¥é˜²ä¸‡ä¸€é”™è¯¯å¤„ç†è¿˜åŠ äº†å»¶æ—¶</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="font-weight:bold">while</span> 1:
</span></span><span style="display:flex;"><span>	<span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>		tag_box=analysis(downloadHtml(url_basic+<span style="font-style:italic">&#39;?page=&#39;</span>+str(x)))
</span></span><span style="display:flex;"><span>		<span style="font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>        time.sleep(3)
</span></span></code></pre></div><h6 id="3322-æ­£æ–‡è·å–">
  3.3.2.2 æ­£æ–‡è·å–
  <a class="heading-link" href="#3322-%e6%ad%a3%e6%96%87%e8%8e%b7%e5%8f%96">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>â€‹	ç”±äºä¸»é¡µå’Œæ­£æ–‡çš„ä»£ç ç»“æ„é«˜åº¦ç›¸ä¼¼ï¼Œæ‰€ä»¥è·å–æºç éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¹ŸåŠ å…¥äº†è¿æ¥æ—¶çš„é”™è¯¯å¤„ç†</p>
<p>â€‹	ä½†æµ‹è¯•æ—¶å‡ºç°äº†é—®é¢˜ï¼Œç»æµå­¦äººåœ¨2020å¹´ä¹‹å‰ä¼šæä¾›ç‰¹åˆŠï¼Œç‰¹åˆŠæ˜¯ç‰¹æ®Šçš„ç›®å½•ï¼Œå¹¶æ²¡æœ‰æ­£æ–‡ç»“æ„ï¼Œæ‰€ä»¥åœ¨è·å–æ­£æ–‡åä¼šæŠ¥é”™</p>
<p>â€‹	ä¸è¿‡ç‰¹åˆŠçš„æ–‡ç« éƒ½åœ¨æœ¬èº«ç›®å½•ä¸­åŒ…å«äº†ï¼Œå› æ­¤åŠ å…¥äº†é”™è¯¯å¤„ç†ï¼Œåªè¦å‡ºé”™å°±è·³è¿‡è¿™ä¸ªé“¾æ¥</p>
<h6 id="3323-æ–‡ä»¶ç”Ÿæˆ">
  3.3.2.3 æ–‡ä»¶ç”Ÿæˆ
  <a class="heading-link" href="#3323-%e6%96%87%e4%bb%b6%e7%94%9f%e6%88%90">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h6>
<p>â€‹	è¿™é‡Œä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œå°±é€‰æ‹©ç”Ÿæˆmarkdownæ–‡æ¡£äº†ï¼Œå¯¹mdæ ¼å¼æœ‰ç–‘é—®çš„çœ‹è¿™ä¸ªé“¾æ¥å°±å¥½</p>
<p>â€‹	<a href="https://www.appinn.com/markdown/">Markdown è¯­æ³•è¯´æ˜(ç®€ä½“ä¸­æ–‡ç‰ˆ) (appinn.com)</a></p>
<p>â€‹	ç‰¹åˆ«æ³¨æ„ï¼Œæ–‡ä»¶åç§°ä¸èƒ½ç›´æ¥ä½¿ç”¨æ ‡é¢˜åç§°ï¼ˆå› ä¸ºå­˜åœ¨ä¸€äº›è¯¸å¦‚ï¼Ÿçš„ç‰¹æ®Šç¬¦å·ï¼‰</p>
<p>â€‹	æ‰€ä»¥é€‰å–äº†ä»é“¾æ¥é‡Œç›´æ¥ç­›å‡ºæ–‡ä»¶åï¼Œæ›¿æ¢æ‰ç½‘é¡µçš„åŸºç¡€é“¾æ¥å’Œ <code>/</code>å³å¯</p>
<hr>
<p><strong>P.S.</strong></p>
<p>â€‹	pycharmã€vscodeå’ŒTyporaç­‰MDç¼–è¾‘å™¨çš„è¯­æ³•å¤„ç†æœ‰æ‰€ä¸åŒ</p>
<p>â€‹	Typoraçš„è¯­æ³•æ ¼å¼ä¸æ–‡æœ¬ä¹‹é—´éœ€è¦ç©ºæ ¼åˆ†éš”ï¼Œä½†pycharmç­‰åˆ™ä¸éœ€è¦</p>
<p>â€‹	ä»¥æ ‡é¢˜çº§åˆ«ä¸¾ä¾‹ï¼Œ###åç›´æ¥è¿æ¥æ­£æ–‡ä¼šæœ‰å¦‚ä¸‹çš„ä¸åŒï¼š</p>
<p><img src="/images/image-20221028134158125.png" alt="image-20221028134158125"></p>
<p><img src="/images/image-20221028134344835.png" alt="image-20221028134344835"></p>
<p>â€‹	æ‰€ä»¥å°½é‡åœ¨è¯­æ³•æ ¼å¼ååŠ ä¸Šç©ºæ ¼</p>
<hr>
<h3 id="4-å®Œæ•´æºç ">
  4 å®Œæ•´æºç 
  <a class="heading-link" href="#4-%e5%ae%8c%e6%95%b4%e6%ba%90%e7%a0%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="font-weight:bold">import</span> <span style="font-weight:bold">requests</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> <span style="font-weight:bold">re</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> <span style="font-weight:bold">json</span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">import</span> <span style="font-weight:bold">time</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">def</span> downloadHtml(url):
</span></span><span style="display:flex;"><span>    cookie = {
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;v&#34;</span>: <span style="font-style:italic">&#34;1649838500&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;vn&#34;</span>: <span style="font-style:italic">&#34;1S&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;Hm_lvt_ae5edc2bc4fc71370807f6187f0a2dd0&#34;</span>: <span style="font-style:italic">&#34;1649766000&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;visited_serachKw&#34;</span>: <span style="font-style:italic">&#34;3060&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;Adshow&#34;</span>: <span style="font-style:italic">&#34;2&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;Hm_lpvt_ae5edc2bc4fc71370807f6187f0a2dd0&#34;</span>: <span style="font-style:italic">&#34;1665768000&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;questionnaire_pv&#34;</span>: <span style="font-style:italic">&#34;1649766000&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;visited_subcateId&#34;</span>: <span style="font-style:italic">&#34;3 | 13&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;visited_subcateProId&#34;</span>: <span style="font-style:italic">&#34;3-0 | 13-0&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    headers = {
</span></span><span style="display:flex;"><span>        <span style="font-style:italic">&#34;User-Agent&#34;</span>: <span style="font-style:italic">&#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.75 Safari/537.36&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    res = requests.get(url=url, headers=headers, timeout=40, cookies=cookie)
</span></span><span style="display:flex;"><span>    res.encoding = <span style="font-style:italic">&#34;utf-8&#34;</span>
</span></span><span style="display:flex;"><span>    res.close()
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> res.text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">def</span> analysis(html):
</span></span><span style="display:flex;"><span>    text_pattern = re.compile(<span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;.*?&lt;/script&gt;&#39;</span>)
</span></span><span style="display:flex;"><span>    tag_box = text_pattern.findall(html)
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">return</span> tag_box
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">def</span> main():
</span></span><span style="display:flex;"><span>    requests.session().keep_alive = <span style="font-weight:bold">False</span>
</span></span><span style="display:flex;"><span>    url_basic=<span style="font-style:italic">&#34;https://www.economist.com/business&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="font-weight:bold">for</span> x <span style="font-weight:bold">in</span> range(255,906):
</span></span><span style="display:flex;"><span>        print(x)
</span></span><span style="display:flex;"><span>        article_urls = []
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">while</span> 1:
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                tag_box=analysis(downloadHtml(url_basic+<span style="font-style:italic">&#39;?page=&#39;</span>+str(x)))
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                time.sleep(3)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">for</span> tag_type <span style="font-weight:bold">in</span> tag_box:
</span></span><span style="display:flex;"><span>            tag_type=tag_type.replace(<span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;&#39;</span>,<span style="font-style:italic">&#39;&#39;</span>).replace(<span style="font-style:italic">&#39;&lt;/script&gt;&#39;</span>,<span style="font-style:italic">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>            print(tag_type)
</span></span><span style="display:flex;"><span>            tag_json=json.loads(tag_type)
</span></span><span style="display:flex;"><span>            urls=tag_json[<span style="font-style:italic">&#39;props&#39;</span>][<span style="font-style:italic">&#39;pageProps&#39;</span>][<span style="font-style:italic">&#39;content&#39;</span>][0][<span style="font-style:italic">&#39;hasPart&#39;</span>][<span style="font-style:italic">&#39;parts&#39;</span>]
</span></span><span style="display:flex;"><span>            <span style="font-style:italic"># print(urls)</span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">for</span> i <span style="font-weight:bold">in</span> urls:
</span></span><span style="display:flex;"><span>                url=i[<span style="font-style:italic">&#39;url&#39;</span>][<span style="font-style:italic">&#39;canonical&#39;</span>]
</span></span><span style="display:flex;"><span>                print(url)
</span></span><span style="display:flex;"><span>                article_urls.append(url)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="font-weight:bold">for</span> url_c <span style="font-weight:bold">in</span> article_urls:
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">while</span> 1:
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                    tag_box = analysis(downloadHtml(url_c))
</span></span><span style="display:flex;"><span>                    <span style="font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                    time.sleep(5)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="font-weight:bold">for</span> tag_type <span style="font-weight:bold">in</span> tag_box:
</span></span><span style="display:flex;"><span>                tag_type = tag_type.replace(<span style="font-style:italic">&#39;&lt;script id=&#34;__NEXT_DATA__&#34; type=&#34;application/json&#34;&gt;&#39;</span>, <span style="font-style:italic">&#39;&#39;</span>).replace(
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic">&#39;&lt;/script&gt;&#39;</span>,
</span></span><span style="display:flex;"><span>                    <span style="font-style:italic">&#39;&#39;</span>)
</span></span><span style="display:flex;"><span>                tag_json = json.loads(tag_type)
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">try</span>:
</span></span><span style="display:flex;"><span>                    urls = tag_json[<span style="font-style:italic">&#39;props&#39;</span>][<span style="font-style:italic">&#39;pageProps&#39;</span>][<span style="font-style:italic">&#39;content&#39;</span>][0]
</span></span><span style="display:flex;"><span>                    headline = urls[<span style="font-style:italic">&#39;headline&#39;</span>]
</span></span><span style="display:flex;"><span>                    description = urls[<span style="font-style:italic">&#39;description&#39;</span>]
</span></span><span style="display:flex;"><span>                    datePublished = urls[<span style="font-style:italic">&#39;datePublished&#39;</span>]
</span></span><span style="display:flex;"><span>                    bodyText = urls[<span style="font-style:italic">&#39;bodyText&#39;</span>]
</span></span><span style="display:flex;"><span>                    file = open(<span style="font-style:italic">&#39;Economy/&#39;</span> + url_c.replace(url_basic + <span style="font-style:italic">&#39;/&#39;</span>, <span style="font-style:italic">&#39;&#39;</span>).replace(<span style="font-style:italic">&#39;/&#39;</span>, <span style="font-style:italic">&#39;.&#39;</span>) + <span style="font-style:italic">&#39;.md&#39;</span>, <span style="font-style:italic">&#39;w&#39;</span>,
</span></span><span style="display:flex;"><span>                                encoding=<span style="font-style:italic">&#39;utf-8&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;## &#39;</span> + headline + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;###### &#39;</span> + description + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(<span style="font-style:italic">&#39;###### &#39;</span> + datePublished + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.write(bodyText + <span style="font-style:italic">&#39;</span><span style="font-weight:bold;font-style:italic">\n</span><span style="font-style:italic">&#39;</span>)
</span></span><span style="display:flex;"><span>                    file.close
</span></span><span style="display:flex;"><span>                    print(headline)
</span></span><span style="display:flex;"><span>                <span style="font-weight:bold">except</span> <span style="font-weight:bold">Exception</span> <span style="font-weight:bold">as</span> e:
</span></span><span style="display:flex;"><span>                    print(<span style="font-style:italic">&#39;Did not fit,abandon&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="font-weight:bold">if</span> __name__ == <span style="font-style:italic">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div>
        </div>
        
      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "nothing" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    Â©
    
    2022
     Hiropoi 
    Â·
    
    Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
    
  </section>
</footer>

  </main>

 

  

  
  
  <script src="/js/coder.min.236049395dc3682fb2719640872958e12f1f24067bb09c327b233e6290c7edac.js" integrity="sha256-I2BJOV3DaC&#43;ycZZAhylY4S8fJAZ7sJwyeyM&#43;YpDH7aw="></script>
  

  

  

  

  

  

  

  

  

  
</body>

</html>
